# ๐งช ุฏููู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู (Grand Scenario Test)

## โ ุงููุชุทูุจุงุช ูุจู ุงูุจุฏุก

1. **Firebase Setup:**
   - ุชุฃูุฏ ูู ุฅุนุฏุงุฏ Firebase Storage (ุฑุงุฌุน `FIREBASE_SETUP.md`)
   - ุชุฃูุฏ ูู ุชุญุฏูุซ Firebase config ูู `.env` ุฃู `firebase.js`
   - ุชุฃูุฏ ูู ุฃู Storage Rules ุชุณูุญ ุจุงููุฑุงุกุฉ/ุงููุชุงุจุฉ

2. **Database:**
   - ุชุฃูุฏ ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุธููุฉ (ุฃู ุงุญูุธ ูุณุฎุฉ ุงุญุชูุงุทูุฉ)
   - ุชุฃูุฏ ูู ูุฌูุฏ ุดุฑูู ูุงุญุฏ ุนูู ุงูุฃูู ูู ุงููุธุงู

---

## ๐ ุณููุงุฑูู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู

### **ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุดูุฉ ุชุฌุฑูุจูุฉ (Test Apt)**

1. **ุงุฐูุจ ุฅูู:** ุงูุดูู (`/apartments`) โ "ุฅุถุงูุฉ ุดูุฉ ุฌุฏูุฏุฉ"

2. **ุฃุฏุฎู ุงูุจูุงูุงุช ุงูุชุงููุฉ:**
   - **ุงุณู ุงูุดูุฉ:** `Test Apt`
   - **ุงููุฏููุฉ:** `ุงููุงูุฑุฉ`
   - **ุงูุนููุงู:** `ุดุงุฑุน ุงูุชุญุฑูุฑ`
   - **ูุตู:** `ุดูุฉ ุชุฌุฑูุจูุฉ ููุงุฎุชุจุงุฑ`
   - **ูุฏู ุงูุงุณุชุซูุงุฑ:** `100000` (EGP)
   - **ุชุงุฑูุฎ ุจุฏุงูุฉ ุงูุงุณุชุซูุงุฑ:** `2024-01-01` (ุฃู ุชุงุฑูุฎ ุงูููู)

3. **ุฃุถู ุดุฑูู ูุงุญุฏ:**
   - **ุงูุงุณู:** `ุดุฑูู ุชุฌุฑูุจู`
   - **ุงููุณุจุฉ:** `30%`

4. **ุฃุถู ุบุฑูุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู:**
   - **ุฑูู ุงูุบุฑูุฉ:** `101`
   - **ููุน ุงูุบุฑูุฉ:** `Double`
   - **ุนุฏุฏ ุงูุฃุณุฑุฉ:** `2`

5. **ุงููุฑ:** "ุญูุธ"

6. **ุงูุชุญูู:**
   - โ ูุฌุจ ุฃู ุชุธูุฑ "Test Apt" ูู ูุงุฆูุฉ ุงูุดูู
   - โ ูุฌุจ ุฃู ูุญุชูู ุนูู Investment Target = 100,000 EGP

---

### **ุงูุฎุทูุฉ 2: ุฅูุดุงุก ุญุฌุฒ ุจูููุฉ 10,000 EGP ูุน ุฎุตู 1,000 EGP ููุตูุฏูู**

1. **ุงุฐูุจ ุฅูู:** ุงูุญุฌูุฒุงุช (`/bookings`) โ "ุฅุถุงูุฉ ุญุฌุฒ ุฌุฏูุฏ"

2. **ุฃุฏุฎู ุจูุงูุงุช ุงูุญุฌุฒ:**
   - **ุงูุดูุฉ:** `Test Apt`
   - **ุงูุบุฑูุฉ:** `101`
   - **ุงุณู ุงูุถูู:** `ุนููู ุชุฌุฑูุจู`
   - **ุฑูู ุงููุงุชู:** `01000000000`
   - **ุชุงุฑูุฎ ุงููุตูู:** `ุงูููู`
   - **ุชุงุฑูุฎ ุงููุบุงุฏุฑุฉ:** `ุจุนุฏ ุฃุณุจูุน`
   - **ุงููุตุฏุฑ:** `ุฎุงุฑุฌู`
   - **ุนูููุฉ ุงูููุตุฉ:** `10%` (ุฃู ุฃู ูุณุจุฉ)
   
3. **ุฅุนุฏุงุฏ ุงููุจูุบ:**
   - **ุฅุฌูุงูู ูุจูุบ ุงูุญุฌุฒ (USD):** `200` (ุฃู ูุง ูุนุงุฏู 10,000 EGP ุฅุฐุง ูุงู ุณุนุฑ ุงูุตุฑู 50)
   - **ุนููุฉ ุงููุจูุบ:** `USD`

4. **Development Deduction:**
   - **ุงูููุน:** `Fixed Amount`
   - **ุงููููุฉ:** `1000` (EGP)
   - **ุงูุชุญูู:** ูุฌุจ ุฃู ูุธูุฑ "Development Deduction (USD): ~$20.00" (ุฅุฐุง ูุงู ุณุนุฑ ุงูุตุฑู 50)

5. **ุงููุจูุบ ุงููุฏููุน:**
   - **ุงููุจูุบ:** `200` (USD)
   - **ุงูุทุฑููุฉ:** `ููุฏู`

6. **ุงููุฑ:** "ุญูุธ"

7. **ุงูุชุญูู:**
   - โ ูุฌุจ ุฃู ูุธูุฑ ุงูุญุฌุฒ ูู ูุงุฆูุฉ ุงูุญุฌูุฒุงุช
   - โ ูุฌุจ ุฃู ูุธูุฑ "Estimated Net Profit" ูู ุงููููุฐุฌ (ูุจู ุงูุญูุธ)
   - โ ุงูุญุฌุฒ ูุฌุจ ุฃู ูููู "ูุคูุฏ" (Confirmed)

---

### **ุงูุฎุทูุฉ 3: ุงูุชุญูู ูู ุฑุตูุฏ ุตูุฏูู ุงูุชุทููุฑ**

1. **ุงุฐูุจ ุฅูู:** ุตูุฏูู ุงูุชุทููุฑ (`/fund`)

2. **ุงูุชุญูู ูู:**
   - โ **Total Balance** ูุฌุจ ุฃู ูููู `$20.00` (ุฃู ูุง ูุนุงุฏู 1,000 EGP)
   - โ **Total Deposits** ูุฌุจ ุฃู ูููู `$20.00`
   - โ ูุฌุจ ุฃู ุชุธูุฑ ูุนุงููุฉ ุฌุฏูุฏุฉ ูู ุฌุฏูู ุงููุนุงููุงุช:
     - **ุงูููุน:** `ุฅูุฏุงุน` (Deposit)
     - **ุงููุตู:** `Development Fund Contribution from Booking BK-...`
     - **ุงููุจูุบ:** `$20.00`
     - **ุงููุตุฏุฑ:** `ุชููุงุฆู` (System Generated)

3. **ููุงุญุธุฉ:** ุงูุชุจ ุงููุจูุบ ุงูุญุงูู ููุฑุฌูุน ุฅููู ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ.

---

### **ุงูุฎุทูุฉ 4: ุดุฑุงุก ุนูุตุฑ ูู ุงููุฎุฒูู ูู ุงูุตูุฏูู**

1. **ุงุฐูุจ ุฅูู:** ุงููุฎุฒูู (`/inventory`) โ "ุฅุถุงูุฉ ุนูุตุฑ ุฌุฏูุฏ"

2. **ุฃุฏุฎู ุจูุงูุงุช ุงูุนูุตุฑ:**
   - **ุงุณู ุงูุนูุตุฑ:** `New AC`
   - **ุงููุฆุฉ:** `Appliances` (ุฃุฌูุฒุฉ)
   - **ุงููููุฉ:** `1`
   - **ุณุนุฑ ุงููุญุฏุฉ (EGP):** `800`
   - **ุงูุญุงูุฉ:** `New`
   - **ุงููููุน ุงูุญุงูู:** `ุงููุณุชูุฏุน`

3. **ุฑูุน ุตูุฑุฉ:**
   - **ุงุฎุชุฑ ุตูุฑุฉ** (ุฃู ุตูุฑุฉ)
   - โ **ุงูุชุญูู:** ูุฌุจ ุฃู ูุธูุฑ progress bar ุฃุซูุงุก ุงูุฑูุน
   - โ **ุงูุชุญูู:** ูุฌุจ ุฃู ูุธูุฑ "โ ุชู ุฑูุน ุงูุตูุฑุฉ ุจูุฌุงุญ" ุจุนุฏ ุงูุฑูุน
   - โ **ุงูุชุญูู:** ูุฌุจ ุฃู ูุธูุฑ Preview ููุตูุฑุฉ

4. **ุงูุฏูุน ูู ุตูุฏูู ุงูุชุทููุฑ:**
   - โ **ุถุน ุนูุงูุฉ** ุนูู "๐ ุงูุฏูุน ูู ุตูุฏูู ุงูุชุทููุฑ"
   - **ุงูุชุญูู ูู ุงูุญุณุงุจ:**
     - ุงูุฑุตูุฏ ุงูุญุงูู: `$20.00` (ูู ุงูุฎุทูุฉ 3)
     - ุงููุจูุบ ุงููุทููุจ: `$16.00` (800 EGP รท 50)
     - โ ูุฌุจ ุฃู ูุธูุฑ ุงูุฑุตูุฏ ุงูุญุงูู ูุงููุจูุบ ุงููุทููุจ ุจุงูููู ุงูุฃุฎุถุฑ (ุฑุตูุฏ ูุงูู)

5. **ุงููุฑ:** "ุฅุถุงูุฉ"

6. **ุงูุชุญูู:**
   - โ ูุฌุจ ุฃู ูุธูุฑ ุงูุนูุตุฑ "New AC" ูู ูุงุฆูุฉ ุงููุฎุฒูู
   - โ ูุฌุจ ุฃู ุชุธูุฑ ุงูุตูุฑุฉ (ูู Firebase Storage)
   - โ ูุฌุจ ุฃู ูููู ุงููููุฉ ุงูุฅุฌูุงููุฉ: `800 ุฌ.ู`

---

### **ุงูุฎุทูุฉ 5: ุงูุชุญูู ูู ุฑุตูุฏ ุงูุตูุฏูู ุจุนุฏ ุงูุดุฑุงุก**

1. **ุงุฐูุจ ุฅูู:** ุตูุฏูู ุงูุชุทููุฑ (`/fund`)

2. **ุงูุชุญูู ูู:**
   - โ **Total Balance** ูุฌุจ ุฃู ูููู `$4.00` (20 - 16 = 4)
   - โ **Total Withdrawals** ูุฌุจ ุฃู ูููู `$16.00`
   - โ ูุฌุจ ุฃู ุชุธูุฑ ูุนุงููุฉ ุฌุฏูุฏุฉ:
     - **ุงูููุน:** `ุณุญุจ` (Withdrawal)
     - **ุงููุตู:** `ุดุฑุงุก ูุฎุฒูู: New AC (1 ูุทุนุฉ)`
     - **ุงููุจูุบ:** `$16.00`
     - **ุงููุตุฏุฑ:** `ุชููุงุฆู` (System Generated)

3. **ุญุณุงุจ ูุฏูู:**
   ```
   ุงูุฑุตูุฏ ุงูุฃููู: $20.00
   - ุงููุจูุบ ุงููุณุญูุจ: $16.00
   = ุงูุฑุตูุฏ ุงูุญุงูู: $4.00
   ```

---

### **ุงูุฎุทูุฉ 6: ุงูุชุญูู ูู ROI Chart ููุดูุฉ**

1. **ุงุฐูุจ ุฅูู:** ุงูุดูู (`/apartments`)

2. **ุงููุฑ ุนูู:** `Test Apt` ููุชุญ ุชูุงุตูู ุงูุดูุฉ

3. **ุงูุชุญูู ูู ROI Tracker:**
   - โ ูุฌุจ ุฃู ูุธูุฑ ูุณู "๐ ุชุชุจุน ุงูุนุงุฆุฏ ุนูู ุงูุงุณุชุซูุงุฑ (ROI)"

4. **ุงูุชุญูู ูู Donut Chart:**
   - โ ูุฌุจ ุฃู ูุธูุฑ ุฑุณู ุฏุงุฆุฑู (Donut Chart)
   - โ ูุฌุจ ุฃู ูููู ุงูุฌุฒุก ุงููููู (ุงููุณุชุฑุฏ) โ 9% (9,000 EGP ูู 100,000 EGP)
   - โ ุงูููู ูุฌุจ ุฃู ูููู **ุฃุญูุฑ** (Red) ูุฃู < 30% ูุณุชุฑุฏ

5. **ุงูุชุญูู ูู ุงูุฅุญุตุงุฆูุงุช:**
   - โ **ูุฏู ุงูุงุณุชุซูุงุฑ:** `100,000 ุฌ.ู`
   - โ **ุงููุจูุบ ุงููุณุชุฑุฏ:** `~$180.00` ุฃู `~9,000 ุฌ.ู`
     - ุงูุญุณุงุจ: Hostel Share = Total Booking - Platform Commission - Dev Deduction - Partner Share
     - ูุซุงู: 10,000 - 1,000 - 1,000 - (0.30 ร 8,000) = 8,000 - 2,400 = 5,600 EGP
     - **ููุงุญุธุฉ:** ูุฏ ูุฎุชูู ุญุณุจ ุงููุณุจ ุงููุญุฏุฏุฉ
   - โ **ุงููุจูุบ ุงููุชุจูู:** `~$1,820.00` ุฃู `~91,000 ุฌ.ู`
   - โ **ูุณุจุฉ ุงูุงุณุชุฑุฏุงุฏ:** `~9%`
   - โ **ุงูุญุงูุฉ:** ๐ด `ูุญุชุงุฌ ุงุณุชุซูุงุฑุงุช ุฅุถุงููุฉ` (ุฃู ุฑุณุงูุฉ ูุดุงุจูุฉ)

6. **ุงูุชุญูู ูู ุงูุชุงุฑูุฎ:**
   - โ **ุชุงุฑูุฎ ุจุฏุงูุฉ ุงูุงุณุชุซูุงุฑ:** ูุฌุจ ุฃู ูุทุงุจู ูุง ุฃุฏุฎูุชู ูู ุงูุฎุทูุฉ 1
   - โ **ุนุฏุฏ ุงูุญุฌูุฒุงุช:** `1`

---

## โ Checklist ููุงุฆู

### โ Data Flow Verification:
- [ ] Booking created โ Fund balance increased
- [ ] Inventory purchase โ Fund balance decreased
- [ ] ROI Chart reflects Hostel Share revenue

### โ UI/UX Verification:
- [ ] All modals open/close correctly
- [ ] All forms validate correctly
- [ ] All images load from Firebase Storage
- [ ] Progress indicators work during upload
- [ ] Toast notifications appear for success/error

### โ Financial Calculations:
- [ ] Development Deduction calculated correctly
- [ ] Fund transactions recorded correctly
- [ ] ROI percentage calculated correctly
- [ ] Hostel Share calculated correctly

### โ Backend Integration:
- [ ] All API calls succeed
- [ ] Database updates correctly
- [ ] Firebase Storage uploads work
- [ ] No console errors

---

## ๐ Troubleshooting

### ุงููุดููุฉ: Firebase upload fails
**ุงูุญู:**
1. ุชุญูู ูู Firebase config ูู `.env` ุฃู `firebase.js`
2. ุชุญูู ูู Storage Rules ูู Firebase Console
3. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช

### ุงููุดููุฉ: Fund balance doesn't update
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฃู Development Deduction > 0 ูู ุงูุญุฌุฒ
2. ุชุญูู ูู console logs ูู Backend
3. ุฃุนุฏ ุชุญููู ุตูุญุฉ Fund

### ุงููุดููุฉ: ROI Chart doesn't appear
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฃู `investmentTarget` > 0 ูู ุงูุดูุฉ
2. ุชุฃูุฏ ูู ุฃู `investmentStartDate` ูุญุฏุฏ
3. ุชุฃูุฏ ูู ูุฌูุฏ ุญุฌูุฒุงุช ุจุนุฏ ุชุงุฑูุฎ ุงูุงุณุชุซูุงุฑ
4. ุชุญูู ูู API response ูู Network tab

### ุงููุดููุฉ: Numbers don't match calculations
**ุงูุญู:**
1. ุชุญูู ูู ุณุนุฑ ุงูุตุฑู (ุงูุชุฑุงุถู 50)
2. ุชุฃูุฏ ูู ุญุณุงุจ Hostel Share ุจุดูู ุตุญูุญ:
   - Hostel Share = Total - Platform Commission - Dev Deduction - Partner Share
3. ุชุญูู ูู ุฃู ุงูุดุฑูู ูุฏูู ูุณุจุฉ ุตุญูุญุฉ

---

## ๐ Success Criteria

ุงูุงุฎุชุจุงุฑ ูุนุชุจุฑ **ูุงุฌุญุงู** ุฅุฐุง:
- โ ุฌููุน ุงูุฎุทูุงุช 1-6 ุชูุชูู ุจุฏูู ุฃุฎุทุงุก
- โ ุฌููุน ุงูุฃุฑูุงู ูุงูุญุณุงุจุงุช ุตุญูุญุฉ
- โ ุฌููุน ุงูุตูุฑ ุชุธูุฑ ูู Firebase Storage
- โ Fund balance ูุนูุณ ุงููุนุงููุงุช ุจุดูู ุตุญูุญ
- โ ROI Chart ูุนุฑุถ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ

---

## ๐ Notes

- **ุณุนุฑ ุงูุตุฑู ุงูุงูุชุฑุงุถู:** 50 EGP = 1 USD
- **Development Deduction:** ููุฎุตู ูุจู ุชูุฒูุน ุงูุฃุฑุจุงุญ ุนูู ุงูุดุฑูุงุก
- **Hostel Share:** ูู ุงูุฑุจุญ ุงูุฐู ูุณุงูู ูู ROI
- **ROI Calculation:** ูุชู ููุท ูู Hostel Shareุ ูููุณ ูู ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช

---

## ๐ Next Steps After Testing

ุจุนุฏ ุงูุชูุงู ุงูุงุฎุชุจุงุฑ ุงููุงุฌุญ:
1. โ ุงููุธุงู ุฌุงูุฒ ููุฅูุชุงุฌ
2. โ ุฌููุน ุงูููุฒุงุช ูุชูุงููุฉ
3. โ ูููู ุงูุจุฏุก ูู ุงุณุชุฎุฏุงู ุงููุธุงู ุงููุนูู

**Congratulations! ๐**

